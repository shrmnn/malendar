(this.webpackJsonpmalendar=this.webpackJsonpmalendar||[]).push([[0],[,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/arrow.8168175f.svg"},,,function(e,a,t){e.exports=t.p+"static/media/moon.0ae2b2c9.svg"},function(e,a,t){e.exports=t(23)},,,,,function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),i=t.n(o),c=(t(17),t(18),function(){return r.a.createElement("header",{className:"Header"},r.a.createElement("div",{"aria-label":"Site logo",className:"Logo"},r.a.createElement("div",{className:"Header__Logo--M"},"M"),"C"),r.a.createElement("div",{className:"Menu"},r.a.createElement("div",{"aria-label":"Link to update feed",className:"Menu",title:"WIP"},"What's new"),r.a.createElement("div",{"aria-label":"Link to about page",className:"Menu",title:"WIP"},"About")))}),l=t(4),s=t(1),u=t.n(s),m=t(2),d=t(6),h=t(3),f=(t(20),r.a.memo((function(e){var a={background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, #0E0E0E 105%), url(".concat(e.ani?e.ani.image:"",") center center no-repeat")};return r.a.createElement("div",{"aria-label":e.ani.id?"Anime is ".concat(e.ani.title,", their airing date is ").concat(e.ani.airing):"",className:"Days__Day ".concat(e.ani.day?"":"Days__Day--filledDay"," ").concat(e.id>e.ldm?"--hidden":""),style:e.ani.image?a:null,onClick:function(){e.ani.id&&window.open("https://myanimelist.net/anime/".concat(e.ani.id),"_blank")},rel:"nofollow noreferer",itemType:"Anime",itemScope:!0},r.a.createElement("time",{className:"Days__Day_DayNum ".concat(parseInt(e.id)===e.today?"Days__Day_DayNum--mToday":""),dateTime:e.ani.airing,itemType:"startDate"},e.ani.day?e.ani.day.toString().padStart(2,"0"):e.id<=e.ldm?e.id:""),r.a.createElement("div",{className:"Days__Day_CardTitle"},r.a.createElement("div",{className:"Days__Day_CardTitle--DayTitle",itemType:"name"},e.ani?e.ani.title:"\u7537\u5b50\u9ad8\u6821\u751f\u3067\u58f2\u308c\u3063\u5b50\u30e9\u30a4\u30c8\u30ce\u30d9\u30eb\u4f5c\u5bb6\u3092\u3057\u3066\u3044\u308b\u3051\u308c\u3069\u3001\u5e74\u4e0b\u306e\u30af\u30e9\u30b9\u30e1\u30a4\u30c8\u3067\u58f0\u512a\u306e\u5973\u306e\u5b50\u306b\u9996\u3092\u7d5e\u3081\u3089\u308c\u3066\u3044\u308b! The Animation 2nd Season"),r.a.createElement("div",{className:"Days__Day_CardTitle--DaySubtitle",itemType:"productionCompany"},e.ani.studio?e.ani.studio.name:"Studio is currently unknown")))}))),g=[],b=function(){var e=Object(d.a)(u.a.mark((function e(a,t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat("https://malendar.herokuapp.com/","season/").concat(a,"/").concat(t,"/")).then((function(e){return 429===e.status&&console.log("Too many requests!"),e.ok||console.error("Could not fetch!"),e}));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.anime);case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),v=function(e,a,t){var n=[];for(var r in n.push(e.map((function(e){return e}))),n=n[0])n[r]={id:n[r].mal_id,title:n[r].title,airing:w(n[r].airing_start),image:n[r].image_url,studio:n[r].producers[0]};return g=n,y(),E(a,t),!0},y=function(){var e=Object(m.a)(g);e.sort((function(e,a){return e.airing>a.airing?1:e.airing<a.airing?-1:0})),g=Object(m.a)(e)},p=function(e,a){return new Date(a,new Date("01 ".concat(e," ").concat(a)).getMonth()+1,0).getDate()},w=function(e){return new Date(e).toLocaleString("en-US",{timeZone:"Japan"})},E=function(e,a){var t=Object(m.a)(g),n=[];n.length=p(e,a),n=_(n,e,a);var r=new Date("01 ".concat(e," ").concat(a)).getTime(),o=new Date("".concat(p(e,a)," ").concat(e," ").concat(a)).getTime();t.forEach((function(e,a){var t=new Date(e.airing).getTime();return t<=o&&t>=r&&(e.day=new Date(e.airing).getDate(),n[e.day-1]=e,!0)})),g=Object(m.a)(n)},_=function(e,a,t){var n=Object(m.a)(e);return n.fill({id:"",title:"",airing:"",image:"",studio:{name:""}},0,n.length),n},D=function(){var e=Object(d.a)(u.a.mark((function e(a,t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(a,t);case 2:return r=e.sent,e.next=5,v(r,n,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),N=t(8),k=t.n(N),C=function(e){return r.a.createElement("div",{"aria-label":"loading...",className:"Loading"},e.error.error?"Error has occurred(\u2565\ufe4f\u2565)":"(\u3063\u25d4\u25e1\u25d4)\u3063 \ud83c\udf65",e.error.code?console.log(e.error.code):null)},O=function(e){return r.a.createElement("div",{"aria-label":"head navigation",className:"HeadContainer"},r.a.createElement("div",{className:"HeadContainer__DateNav"},r.a.createElement("button",{tabIndex:"0",className:"HeadContainer__Button",onClick:e.changeDate.bind(void 0,-1),title:"Previous month"},r.a.createElement("img",{alt:"back-arrow",style:{transform:"rotate(180deg)"},src:k.a})),r.a.createElement("div",{"aria-label":"select month",className:"HeadContainer__DateNav_DateMonth",onClick:e.monthClick,title:"Click for random month"},e.date.month),r.a.createElement("div",{"aria-label":"select year",className:"HeadContainer__DateNav_DateYear",onClick:e.yearClick,title:"Click for random year"},e.date.year),r.a.createElement("button",{tabIndex:"0",className:"HeadContainer__Button",onClick:e.changeDate.bind(void 0,1),title:"Next month"},r.a.createElement("img",{alt:"fur-arrow",src:k.a}))),r.a.createElement("div",{"aria-label":"select if you want to see ongoing or new releases",className:"HeadContainer__ReleaseNav"},r.a.createElement("div",{className:"padding-left"},"Ongoing"),r.a.createElement("div",{className:"padding-right HeadContainer__ReleaseNav--active"},"New releases")))},j=function(){var e=Object(n.useState)([g]),a=Object(h.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)({month:"July",year:2020}),c=Object(h.a)(i,2),s=c[0],b=c[1],v=Object(n.useState)(!1),y=Object(h.a)(v,2),w=y[0],E=y[1],_=Object(n.useState)({error:!1,code:""}),N=Object(h.a)(_,2),k=N[0],j=N[1];Object(n.useEffect)((function(){!function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),document.body.classList.add("--overflow"),j({error:!1,code:""}),e.prev=3,e.next=6,D(s.year,S(s.month),s.month);case 6:return console.log("titlelist had updated!"),e.next=9,o((function(e){return Object(m.a)(g)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),j({error:!0,code:e.t0});case 14:document.title="malendar for ".concat(s.month," ").concat(s.year),E(!1),document.body.classList.remove("--overflow");case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}()()}),[s]);var S=function(e){return"January"===e||"February"===e?"winter":"March"===e||"April"===e||"May"===e?"spring":"June"===e||"July"===e||"August"===e?"summer":"fall"};return r.a.createElement("main",{className:"Container"},r.a.createElement(O,{monthClick:function(){var e=function e(){var a=["January","February","March","April","May","June","July","August","September","October","November","December"][Math.ceil(11*Math.random())];return a===s.month&&(a=e()),a}();b(Object(l.a)(Object(l.a)({},s),{},{month:e})),console.log("Current season is",S(s.month))},yearClick:function(e){b(Object(l.a)(Object(l.a)({},s),{},{year:Math.ceil(10*Math.random())+2010}))},date:s,changeDate:function(e){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];console.log("hey there what about ",s.month,s.year),"January"===s.month&&e<0?b({month:"December",year:s.year-1}):"December"===s.month&&e>0?b({month:"January",year:s.year+1}):b(Object(l.a)(Object(l.a)({},s),{},{month:a[a.findIndex((function(e){return e===s.month}))+e]}))}}),r.a.createElement("div",{className:"Days"},w||k.error?r.a.createElement(C,{error:k}):null,t.map((function(e,a){return r.a.createElement(f,{id:(a+1).toString().padStart(2,"0"),key:a,ani:t[a],ldm:p(s.month,s.year),today:(new Date).getDate()})}))))},S=(t(21),t(11)),x=t.n(S),A=r.a.memo((function(){var e=Object(n.useState)(!1),a=Object(h.a)(e,2),t=a[0],o=a[1];return r.a.createElement("footer",{className:"Footer"},r.a.createElement("div",{"aria-label":"Author of site is Alex Shermann, made in 2020",className:"Footer__Right"},"Alex Shermann [2020]"),r.a.createElement("div",{className:"Footer__Left"},r.a.createElement("p",{"aria-label":"Site is recommended for 18+",className:"marker",title:"Site is recommended for 18+"},"18+"),r.a.createElement("img",{alt:"change theme","aria-label":"change theme",height:"32",width:"32",src:x.a,onClick:function(){document.body.classList.toggle("blue"),o(!t)},className:t?"Footer__Left--toggled":""}),r.a.createElement("a",{"aria-label":"Link to github",href:"https://github.com/shrmnn/malendar",target:"_blank",rel:"noopener noreferrer",title:"GitHub"},r.a.createElement("img",{alt:"github link","aria-label":"github link",height:"32",width:"32",className:"Footer__Left--github",src:"https://unpkg.com/simple-icons@v3/icons/github.svg"}))))})),M=(t(22),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Content"},r.a.createElement(c,null),r.a.createElement(j,null),r.a.createElement(A,null)))}),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/malendar",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/malendar","/service-worker.js");T?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(a,e)}))}}()}],[[12,1,2]]]);
//# sourceMappingURL=main.339bbdc9.chunk.js.map
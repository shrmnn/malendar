(this.webpackJsonpmalendar=this.webpackJsonpmalendar||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/arrow.2c511b88.svg"},,,function(e,t,a){e.exports=a.p+"static/media/moon.d58b953a.svg"},function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(18),a(19),function(){return r.a.createElement("header",{className:"Header"},r.a.createElement("div",{"aria-label":"Site logo",className:"Logo"},r.a.createElement("div",{className:"Header__Logo--M"},"M"),"C"),r.a.createElement("div",{className:"Menu"},r.a.createElement("div",{"aria-label":"Link to update feed",className:"Menu",title:"WIP"},"What's new"),r.a.createElement("div",{"aria-label":"Link to about page",className:"Menu",title:"WIP"},"About")))}),l=a(4),s=a(3),u=a.n(s),m=a(2),d=a(6),h=a(1),g=(a(21),a(8)),f=new function e(){var t=this;Object(g.a)(this,e),this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.getRandomMonth=function(e){var a=t.months[Math.ceil(11*Math.random())];return a===e.month&&(a=t.getRandomMonth(e)),a},this.getSeasonByMonth=function(e){return"January"===e||"February"===e||"March"===e?"winter":"April"===e||"May"===e||"June"===e?"spring":"July"===e||"August"===e||"September"===e?"summer":"fall"},this.getCurrentMonth=function(){return t.months[(new Date).getMonth()]},this.getLastDayOfMonth=function(e,a){return new Date(a,t.convertToLocale("en-US",new Date("".concat(e," 01 ").concat(a))).getUTCMonth(),0).getDate()},this.convertToLocale=function(e,t){return new Date(new Date(t).toLocaleString(e))},this.convertToJapanTime=function(e){return new Date(e).toLocaleString("en-US",{timeZone:"Japan"})}},y=new function e(){var t=this;Object(g.a)(this,e),this.getCurrentYear=function(){return(new Date).getFullYear()},this.getRandomYear=function(e){var a=Math.ceil(15*Math.random())+2e3;return a===e.year&&(a=t.getRandomYear(e)),a}},b=[],v=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat("https://malendar.herokuapp.com/","season/").concat(t,"/").concat(a,"/")).then((function(e){return 429===e.status&&console.log("Too many requests!"),e.ok||console.error("Could not fetch!"),e}));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.anime);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=function(e,t,a){var n=[];for(var r in n.push(e.map((function(e){return e}))),n=n[0])n[r]={id:n[r].mal_id,title:n[r].title,airing:f.convertToJapanTime(n[r].airing_start),image:n[r].image_url.split(".jpg")[0]+"l.jpg",studio:n[r].producers[0],members:n[r].members,titleArray:[]};return b=n,D(t,a),!0},D=function(e,t){!function(e){var t=Object(m.a)(b);0===e?t.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):1===e?t.sort((function(e,t){return e.members>t.members?1:e.members<t.members?-1:0})):t.sort((function(e,t){return e.airing>t.airing?1:e.airing<t.airing?-1:0})),b=Object(m.a)(t)}(1);var a=Object(m.a)(b).reverse(),n=[];n.length=f.getLastDayOfMonth(e,t),n=_(n,e,t);var r=new Date("01 ".concat(e," ").concat(t)).getTime(),o=new Date("".concat(f.getLastDayOfMonth(e,t)," ").concat(e," ").concat(t)).getTime();a.forEach((function(e,t){var a=new Date(e.airing).getTime();return a<=o&&a>=r&&(e.day=new Date(e.airing).getDate(),n[e.day-1].id?(n[e.day-1].multi=!0,n[e.day-1].titleArray.push(e)):n[e.day-1]=e,!0)})),b=Object(m.a)(n)},_=function(e){var t=Object(m.a)(e);return t.fill({id:"",title:"",airing:"",image:"",studio:{name:""},multi:!1,titleArray:[]},0,t.length),t},w=function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,a);case 2:return r=e.sent,e.next=5,p(r,n,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(e){return r.a.createElement("div",{"aria-label":"loading...",className:"Loading"},e.error.error?"Error has occurred(\u2565\ufe4f\u2565)":"(\u3063\u25d4\u25e1\u25d4)\u3063 \ud83c\udf5c",e.error.code?console.log(e.error.code):null)},N=a(9),k=a.n(N),C=function(e){return r.a.createElement("div",{"aria-label":"head navigation",className:"HeadContainer"},r.a.createElement("div",{className:"HeadContainer__DateNav"},r.a.createElement("button",{tabIndex:"0",className:"HeadContainer__Button",onClick:e.changeDate.bind(void 0,-1),title:"Previous month"},r.a.createElement("img",{alt:"back-arrow",style:{transform:"rotate(180deg)"},src:k.a})),r.a.createElement("div",{"aria-label":"select month",className:"HeadContainer__DateNav_DateMonth",onClick:e.monthClick,title:"Click for random month"},e.date.month),r.a.createElement("div",{"aria-label":"select year",className:"HeadContainer__DateNav_DateYear",onClick:e.yearClick,title:"Click for random year"},e.date.year),r.a.createElement("button",{tabIndex:"0",className:"HeadContainer__Button",onClick:e.changeDate.bind(void 0,1),title:"Next month"},r.a.createElement("img",{alt:"fur-arrow",src:k.a}))),r.a.createElement("div",{"aria-label":"select if you want to see ongoing or new releases",className:"HeadContainer__ReleaseNav"},r.a.createElement("div",{className:"padding-left"},"Ongoing"),r.a.createElement("div",{className:"padding-right HeadContainer__ReleaseNav--active"},"New releases")))},O=r.a.memo((function(e){var t=e.ani,a=Object(h.a)(e.month,2),n=a[0],o=a[1],i={background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, #0E0E0E 105%), url(".concat(t?t.image:"",") center center / cover no-repeat")};return r.a.createElement("div",{"aria-label":t.id?"[".concat(t.id,"] Anime is ").concat(t.title,", their airing date is ").concat(t.airing):"",className:"Days__Day ".concat(t.day?"":"Days__Day--filledDay"," ").concat(e.id>n.getLastDayOfMonth(o.getCurrentYear(),n.getCurrentMonth())?"--hidden":""),style:t.image?i:null,onClick:function(){t.id&&window.open("https://myanimelist.net/anime/".concat(t.id),"_blank")},rel:"nofollow noreferer",itemType:"Anime",itemScope:!0},r.a.createElement("div",{className:"Days__Day_Notificators"},r.a.createElement("time",{className:"Days__Day_DayNum ".concat(parseInt(e.id)===e.today?"Days__Day_DayNum--mToday":""),dateTime:t.airing,itemType:"startDate"},t.day?t.day.toString().padStart(2,"0"):e.id),t.multi?r.a.createElement("div",{itemType:"alsoThisDay",className:"Days__Day_DayNum Days__Day_DayNum--MultititleNotification",onClick:function(a){a.stopPropagation(),e.changeMV(t.day-1)},title:"Also ".concat(t.titleArray.length," anime this day")},"+"+t.titleArray.length):null),r.a.createElement("div",{className:"Days__Day_CardTitle"},r.a.createElement("div",{className:"Days__Day_CardTitle--DayTitle",itemType:"name"},t?t.title:"\u7537\u5b50\u9ad8\u6821\u751f\u3067\u58f2\u308c\u3063\u5b50\u30e9\u30a4\u30c8\u30ce\u30d9\u30eb\u4f5c\u5bb6\u3092\u3057\u3066\u3044\u308b\u3051\u308c\u3069\u3001\u5e74\u4e0b\u306e\u30af\u30e9\u30b9\u30e1\u30a4\u30c8\u3067\u58f0\u512a\u306e\u5973\u306e\u5b50\u306b\u9996\u3092\u7d5e\u3081\u3089\u308c\u3066\u3044\u308b! The Animation 2nd Season"),r.a.createElement("div",{className:"Days__Day_CardTitle--DaySubtitle",itemType:"productionCompany"},t.studio?t.studio.name:"Studio is currently unknown")))})),j=function(e){return r.a.createElement("div",{className:"MultiDay",style:{display:"".concat(e.MV?"grid":"none")}},r.a.createElement("h1",{className:"MultiDay__Header"},"More for ",new Date(e.date).getDate()," ",f.months[new Date(e.date).getMonth()]+" ",new Date(e.date).getFullYear()),r.a.createElement("div",{className:"MultiDay__Titles"},e.titles.map((function(t,a){return r.a.createElement("div",{className:"Days__DayContainer",key:a},r.a.createElement(O,{id:(a+1).toString().padStart(2,"0"),key:e.titles.id,ani:e.titles[a],month:[f,y],today:(new Date).getDate()}))}))))},M=r.a.memo((function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(-1),l=Object(h.a)(c,2),s=l[0],u=l[1],d=e.i,g=e.titles;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Days__DayContainer ".concat(g[d].day?"":"Days__Day--filledDay"),key:"Container__"+d},r.a.createElement(O,{id:(d+1).toString().padStart(2,"0"),key:g[d].id,ani:g[d],month:[f,y],today:(new Date).getDate(),changeMV:function(e){var t=o;t.length=31,t.fill(!1),e!==s?(t[e]=!0,u(e)):(t[e]=!1,u(-1)),i((function(e){return Object(m.a)(t)}))}})),g[d].multi?r.a.createElement(j,{date:g[d].airing,titles:g[d].titleArray,MV:o[g[d].day-1],key:g[d].id+o[g[d].day-1]}):"")})),S=function(){var e=Object(n.useState)([b]),t=Object(h.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)({month:f.getCurrentMonth(),year:y.getCurrentYear()}),c=Object(h.a)(i,2),s=c[0],g=c[1],v=Object(n.useState)(!1),p=Object(h.a)(v,2),D=p[0],_=p[1],N=Object(n.useState)({error:!1,code:""}),k=Object(h.a)(N,2),O=k[0],j=k[1];Object(n.useEffect)((function(){!function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),document.body.classList.add("--overflow"),j({error:!1,code:""}),e.prev=3,e.next=6,w(s.year,f.getSeasonByMonth(s.month),s.month);case 6:return console.log("titlelist had updated!"),e.next=9,o((function(e){return Object(m.a)(b)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),j({error:!0,code:e.t0});case 14:document.title="malendar for ".concat(s.month," ").concat(s.year),_(!1),document.body.classList.remove("--overflow");case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}()()}),[s]);return r.a.createElement("main",{className:"Container"},r.a.createElement(C,{monthClick:function(){var e=f.getRandomMonth(s);g(Object(l.a)(Object(l.a)({},s),{},{month:e})),console.log("Current season is",f.getSeasonByMonth(s.month))},yearClick:function(){var e=y.getRandomYear(s);g(Object(l.a)(Object(l.a)({},s),{},{year:e}))},date:s,changeDate:function(e){console.log("hey there what about ",s.month,s.year),"January"===s.month&&e<0?g({month:"December",year:s.year-1}):"December"===s.month&&e>0?g({month:"January",year:s.year+1}):g(Object(l.a)(Object(l.a)({},s),{},{month:f.months[f.months.findIndex((function(e){return e===s.month}))+e]}))}}),r.a.createElement("div",{className:"Days"},D||O.error?r.a.createElement(E,{error:O}):null,a.map((function(e,t){return r.a.createElement(M,{i:t,titles:a,key:"DayContainer__"+t})}))))};var T=function(e,t){var a=r.a.useState((function(){var a=window.localStorage.getItem(t);return null!==a?JSON.parse(a):e})),n=Object(h.a)(a,2),o=n[0],i=n[1];return r.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(o))}),[t,o]),[o,i]},A=(a(22),a(12)),L=a.n(A),x=r.a.memo((function(){var e=T(!1,"toggled"),t=Object(h.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){a?document.body.classList.remove("blue"):document.body.classList.add("blue")}),[a]);return r.a.createElement("footer",{className:"Footer"},r.a.createElement("div",{"aria-label":"Author of site is Alex Shermann, made in 2020",className:"Footer__Right"},"Alex Shermann [2020]"),r.a.createElement("div",{className:"Footer__Left"},r.a.createElement("p",{"aria-label":"Site is recommended for 18+",className:"marker",title:"Site is recommended for 18+"},"18+"),r.a.createElement("img",{alt:"change theme","aria-label":"change theme",height:"32",width:"32",src:L.a,onClick:function(){o(!a)},className:a?"Footer__Left--toggled":""}),r.a.createElement("a",{"aria-label":"Link to github",href:"https://github.com/shrmnn/malendar",target:"_blank",rel:"noopener noreferrer",title:"GitHub"},r.a.createElement("img",{alt:"github link","aria-label":"github link",height:"32",width:"32",className:"Footer__Left--github",src:"https://unpkg.com/simple-icons@v3/icons/github.svg"}))))})),J=(a(23),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Content"},r.a.createElement(c,null),r.a.createElement(S,null),r.a.createElement(x,null)))}),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/malendar",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/malendar","/service-worker.js");H?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):R(t,e)}))}}()}],[[13,1,2]]]);
//# sourceMappingURL=main.4bcb0379.chunk.js.map